if(typeof Dom=="undefined"){Dom=YAHOO.util.Dom;}if(typeof Connect=="undefined"){Connect=YAHOO.util.Connect;}if(typeof KD=="undefined"){KD={};}if(typeof KD.utils=="undefined"){KD.utils={};}if(!KD.utils.ClientManager){KD.utils.ClientManager=new function(){this._elements=new KD.utils.Hash();this._connections=new KD.utils.Hash();this._invalidSessionRequest=new Array();this._unauthorizedSessionRequests={};this.sessionId="";this.errorMessage="";this.successMessage="";this.authenticated=false;this.userName="";this.templateId="";this.customerSurveyId="";this.categoryId="";this.submitType="";this.isNewPage=true;this.maxCharsOnSubmit=(64*1024)-1;this.tooManyCharactersForSubmitStr="A limit of "+this.maxCharsOnSubmit+" characters for a submit is being applied. Please reduce the number of characters you are attempting to submit.";this.requiredWarningStr="Required fields missing:";this.validFormatWarningStr="Invalid formatted fields:";this.submitButtons=new Array();this.isLoading=false;this.isSubmitting=false;this.sessionCheck=null;this.webAppContextPath="/kinetic";this.customEvents=new KD.utils.Hash();this.onSetFieldsReturn=null;this.onAttachMenu=null;this.init=function(){KD.utils.ClientManager.isLoading=true;if(window.ks_initSessionVars){ks_initSessionVars();}KD.utils.ClientManager.onSetFieldsReturn=new YAHOO.util.CustomEvent("onSetFieldsReturn");KD.utils.ClientManager.onAttachMenu=new YAHOO.util.CustomEvent("onAttachMenu");KD.utils.ClientManager.initElements();KD.utils.ClientManager.initDateFields();KD.utils.ClientManager.checkMessages();KD.utils.ClientManager.initLogin();var a=Dom.get("pageQuestionsForm");YAHOO.util.Event.addListener(a,"submit",KD.utils.Action.validateForm,a,true);if(typeof window.event!="undefined"){document.onkeydown=KD.utils.ClientManager.preventBackSpace;}else{document.onkeypress=KD.utils.ClientManager.preventBackSpace;}if(typeof(customInitialization)=="function"){customInitialization();}if(window.ks_actionsInit){ks_actionsInit();}KD.utils.ClientManager.isLoading=false;};this.processNonIDElement=function(d){var b,c,a;if(!d){return;}for(b=0;b<d.childNodes.length;b++){c=d.childNodes[b];if(!c){return;}a=KD.utils.Util.getIDPart(c.id);if(!a){this.processNonIDElement(c);}else{this._elements.setItem(a,KD.utils.Util.getElementType(c.id));KD.utils.Util.registerInCache(c);KD.utils.ClientManager.initPatternWatch(c);KD.utils.ClientManager.setPreRequire(c);}}};this.registerItems=function(h,a){var k,g,f,j,e,c,b,d;KD.utils.ClientManager._elements.setItem(h,KD.utils.Util.getElementType(a.id));for(e=0;e<a.childNodes.length;e+=1){k=a.childNodes[e];if(!k){continue;}g=KD.utils.Util.getIDPart(k.id);if(!g){continue;}if(k.id&&k.id.indexOf("SECTION_")!=-1){this._elements.setItem(KD.utils.Util.getIDPart(k.id),KD.utils.Util.getElementType(k.id));KD.utils.Util.registerInCache(k);for(c=0;c<k.childNodes.length;c++){b=k.childNodes[c];if(!b){continue;}d=KD.utils.Util.getIDPart(b.id);if(!d){this.processNonIDElement(b);}else{this._elements.setItem(d,KD.utils.Util.getElementType(b.id));KD.utils.Util.registerInCache(b);KD.utils.ClientManager.initPatternWatch(b);KD.utils.ClientManager.setPreRequire(b);}}}else{if(k.className&&k.className.indexOf("templateButtonLayer")!=-1){this._elements.setItem(g,KD.utils.Util.getElementType(k.id));KD.utils.Util.registerInCache(k);this.submitButtons.push(g);f=Dom.get("pageQuestionsForm");j=Dom.getElementsByClassName("templateButton","input",k);YAHOO.util.Event.addListener(j,"click",KD.utils.Action._submitButtonClick,[f,g],true);}else{if(k.id){this._elements.setItem(g,KD.utils.Util.getElementType(k.id));KD.utils.Util.registerInCache(k);KD.utils.ClientManager.initPatternWatch(k);KD.utils.ClientManager.setPreRequire(k);}}}}};this.initElements=function(){var e,b,d=Dom.get("pageID");if(d){b=d.value;}if(b&&b.length>10){e=Dom.get("PAGE_"+b);this.registerItems(b,e);}else{var a=KD.utils.Util.getElementsByClassName("templateContent","div");if(a){for(var c=0;c<a.length;c++){e=a[c];if(e){b=e.id;this.registerItems(KD.utils.Util.getIDPart(b),e);}}}}};this.checkMessages=function(){var a=Dom.get("message");if(a){if(KD.utils.ClientManager.successMessage&&KD.utils.ClientManager.successMessage!=""){a.innerHTML=KD.utils.ClientManager.successMessage;a.style.visibility="visible";a.style.display="block";}if(KD.utils.ClientManager.errorMessage&&KD.utils.ClientManager.errorMessage!=""){a.innerHTML=KD.utils.ClientManager.errorMessage;a.style.visibility="visible";a.style.display="block";}}else{if(KD.utils.ClientManager.errorMessage&&KD.utils.ClientManager.errorMessage!=""){alert(KD.utils.ClientManager.errorMessage);}}};this.initDateFields=function(){var c=KD.utils.Util.getElementsByClassName("dateYear","input");for(var b=0;b<c.length;b++){var a=c[b].id.substring(5);if(a){KD.utils.Action.setDateFields(a);}}c=KD.utils.Util.getElementsByClassName("dtYear","input");for(b=0;b<c.length;b++){a=c[b].id.substring(5);if(a){KD.utils.Action.setDateTimeFields(a);}}};this.initLogin=function(){var h=Dom.get("loginForm");var c=Dom.get("authenticatedName");if(KD.utils.ClientManager.authenticated){if(h){h=h.parentNode;var g=h.parentNode;g.removeChild(h);}if(c){var d=c.innerHTML;d=d.replace(/--loginName--/i,KD.utils.ClientManager.userName);c.innerHTML=d;}}else{if(c){var f=c.parentNode;f.removeChild(c);}var e=Dom.get("originatingPage");if(e){e.value=this.originatingPage;}var b=Dom.get("authenticationType");if(b){b.value=this.authenticationType;}var a=Dom.get("loginSessionID");if(a){a.value=Dom.get("sessionID").value;}}};this.getElementType=function(a){return this._elements.getItem(a);};this.clearInvalidSessionRequest=function(){KD.utils.ClientManager._invalidSessionRequest=new Array();};this.getInvalidSessionRequest=function(){return KD.utils.ClientManager._invalidSessionRequest;};this.registerInvalidSessionRequest=function(a,b,c,e){var d=new Array();d[0]=a;d[1]=b;d[2]=c;d[3]=e;KD.utils.ClientManager._invalidSessionRequest=d;};this.registerUnauthorizedSessionRequest=function(a,d,b,c){KD.utils.ClientManager._unauthorizedSessionRequests[a]=[a,d,b,c];
};this.setNewConnection=function(a,b){if(a!=null&&b!=null&&b.length>0){KD.utils.ClientManager._connections.setItem(a,b);}};this.isActiveConnection=function(a){var c=KD.utils.ClientManager._connections.getItem(a);var b=false;if(c!=null&&c.length>0){b=Connect.isCallInProgress(c[0]);}return b;};this.getConnection=function(a){var b;if(a!=null){b=KD.utils.ClientManager._connections.getItem(a);}return b;};this.addAction=function(d){if(d.jsEvent=="*custom*"||d.jsEvent=="submit"||d.jsEvent=="beforeSubmit"){var e=d.elementId;if(d.jsEvent=="submit"||d.jsEvent=="beforeSubmit"){e=e+"-"+d.jsEvent;}KD.utils.ClientManager.addCustomEvent(e,d);return;}if(d.jsEvent=="setFieldsReturn"||d.jsEvent=="attachMenu"){var b=KD.utils.ClientManager.onSetFieldsReturn;if(d.jsEvent=="attachMenu"){b=KD.utils.ClientManager.onAttachMenu;}b.subscribe(function(f,g,h){KD.utils.Action._customEventHandler(f,g,h);},d);return;}YAHOO.util.Event.addListener(d.elObj,d.jsEvent,function(f){d.action.apply(KD.utils.Action,[f,this]);},d,true);var c=new Array();if(KD.utils.Util.isArray(d.elObj)){c=d.elObj;}else{c.push(d.elObj);}for(var a=0;a<c.length;a++){KD.utils.Action.applyValueActions(c[a],d);}};this.addCustomEvent=function(c,b){var a=KD.utils.ClientManager.customEvents.getItem(c);if(a&&a.length>0){a.push(b);}else{a=[b];}KD.utils.ClientManager.customEvents.setItem(c,a);};this.initPatternWatch=function(a){var c=KD.utils.Util.getQuestionInput(KD.utils.Util.getIDPart(a.id));if(c&&!c.length){var b=c.getAttribute("validationFormat");if(b&&b!=""){YAHOO.util.Event.addListener(c,"focus",KD.utils.Action._disableButtonEvents);YAHOO.util.Event.addListener(c,"blur",KD.utils.Action.checkPattern);}else{if(c.tagName&&c.tagName.toUpperCase()=="TEXTAREA"&&c.getAttribute("maxlength")){YAHOO.util.Event.addListener(c,"keyup",function(f,d){KD.utils.Action.watchFieldLength(d);},c);YAHOO.util.Event.addListener(c,"change",function(f,d){KD.utils.Action.watchFieldLength(d);},c);}}}if(c&&!KD.utils.Util.isArray(c)){if(c.getAttribute("fileTypesAllowed")!=null){YAHOO.util.Event.addListener(c,"change",function(f,d){KD.utils.Action._setFileLink(d);},c);KD.utils.Action._setFileLink(c);}}};this.alertPanel=function(c){if(c==null){c={header:"Alert",body:"",element:null};}var f="validationAlert";var a=Dom.get(f);var b="validationAlertOk";try{if(!a){a=document.createElement("div");a.id=f;document.body.appendChild(a);var g=new YAHOO.widget.Panel(f,{visible:false,close:false,draggable:true,fixedcenter:true,constraintoviewport:true,zindex:2,iframe:true,modal:true});g.hideEvent.subscribe(function(){if(c.element&&c.element.focus&&c.element.style&&c.element.style.visiblity!="hidden"&&c.element.style.display!="none"){try{c.element.focus();c.element.select();}catch(e){}}});var i=document.createElement("input");i.id=b;i.type="button";i.value="OK";i.onclick=function(){g.hide();g.destroy();};}g.setHeader(c.header||"Form Errors: ");g.setBody((c.body||"").replace(/\n/g,"<br/>"));g.setFooter(i);g.render(document.body);g.show();}catch(h){var d=Dom.get(f);if(d){document.removeChild(d);}}};this.renderSimpleLogin=function(c){KD.utils.ClientManager.buildSimpleLogin(c);var h=function(){KD.utils.ClientManager.isSubmitting=false;for(var j=0;j<KD.utils.ClientManager.submitButtons.length;j+=1){KD.utils.Action.enableButton(KD.utils.ClientManager.submitButtons[j]);}this.cancel();this.destroy();};var b=function(){Connect.initHeader("X-Requested-With","XMLHttpRequest");this.submit();this.show();};var f=new YAHOO.widget.Dialog("simpleLogin",{width:"300px",fixedcenter:true,visible:false,constraintoviewport:true,close:false,modal:true,postmethod:"async",buttons:[{text:"Login",handler:b,isDefault:true},{text:"Cancel",handler:h}]});var a=function(n){KD.utils.ClientManager.isSubmitting=false;for(var j=0;j<KD.utils.ClientManager.submitButtons.length;j+=1){KD.utils.Action.enableButton(KD.utils.ClientManager.submitButtons[j]);}var m=KD.utils.ClientManager.getInvalidSessionRequest();if(m.length>0){if(m[0]==="PREV_PAGE_REQUEST"){KD.utils.Action.disableSubmitButtons();KD.utils.Action.loadPreviousPage();}else{if(m[0]==="NEXT_PAGE_REQUEST"){KD.utils.Action.disableSubmitButtons();document.pageQuestionsForm.submit();}else{if(m[1]!==null&&m[2]!==null&&m[3]!==null){Connect.asyncRequest(m[1],m[2],m[3]);}else{}}}}for(var l in KD.utils.ClientManager._unauthorizedSessionRequests){var k=KD.utils.ClientManager._unauthorizedSessionRequests[l];Connect.asyncRequest(k[1],k[2],k[3]);}f.hide();f.destroy();};var e=function(m){var k=null;if(m&&m.status){k=m.status;}var j=null;if(m&&m.getResponseHeader&&m.getResponseHeader["X-Error-Message"]){j=m.getResponseHeader["X-Error-Message"];}else{j="Error: "+k;}var i=Dom.get("simpleLoginMsg");if(i){i.innerHTML=j;Dom.setStyle(i,"display","block");}else{alert(j);}var l=Dom.get("simpleLoginPass");if(l){l.value="";l.select();l.focus();}};f.callback={success:a,failure:e,timeout:30000};f.validate=function(){var i=this.getData();if(i.UserName==""){alert("Please enter your Login ID");return false;}else{return true;}};f.render();f.show();f.focusFirst();var d=Dom.get("simpleLoginUser");var g=Dom.get("simpleLoginPass");if(d&&d.getAttribute("readOnly")!="true"){d.select();d.focus();}else{g.select();g.focus();}};this._findPreRequireObject=function(f){if(typeof f=="string"){f=KD.utils.Util.getQuestionLayer(f);}if(f==null||f=="undefined"||!f.children){return null;}var b=null;var h=null;var e;var c,a;for(c=0;c<f.children.length;c++){if(f.children[c].id!=undefined&&f.children[c].id.indexOf("QANSWER_")!=-1){var d=f.children[c].children;for(a=0;a<d.length;a++){if(d[a].id!=undefined&&d[a].id.indexOf("year_")!=-1){h=d[a];}if(d[a].id!=undefined&&d[a].id.indexOf("SRVQSTN_")!=-1){b=d[a];break;}}if(b==null){d=f.children[c].children[0].children;for(a=0;a<d.length;a++){if(d[a].id!=undefined&&d[a].id.indexOf("SRVQSTN_")!=-1){b=d[a];break;}}}}}e=h?"date":KD.utils.Util.getAnswerType(b);var g={"qElement":f,"qInput":b,"type":e,"dateInput":h};return g;};this.setPreRequire=function(c){var g=KD.utils.ClientManager._findPreRequireObject(c);
if(g==null){return;}var d=g.type;var b=g.qInput;var h=g.dateInput;var e=g.qElement;var a;if(b&&b.getAttribute("required")=="true"){KD.utils.Util.removeClass(e,"preRequiredRemovedLayer");KD.utils.Util.addClass(e,"preRequiredLayer");KD.utils.Util.addClass(e,"preRequiredLayer_"+d);for(a=0;a<e.children.length;a++){if(e.children[a].id!=undefined&&e.children[a].id.indexOf("QLABEL_")!=-1){KD.utils.Util.removeClass(e.children[a],"preRequiredRemovedLabel");KD.utils.Util.addClass(e.children[a],"preRequiredLabel");KD.utils.Util.addClass(e.children[a],"preRequiredLabel_"+d);break;}}for(a=0;a<e.children.length;a++){if(e.children[a].id!=undefined&&e.children[a].id.indexOf("QANSWER_")!=-1){KD.utils.Util.removeClass(e.children[a],"preRequiredRemovedAnswer");KD.utils.Util.addClass(e.children[a],"preRequiredAnswer");KD.utils.Util.addClass(e.children[a],"preRequiredAnswer_"+d);break;}}var f=h?h:b;KD.utils.Util.removeClass(f,"preRequiredRemovedInput");KD.utils.Util.addClass(f,"preRequiredInput");KD.utils.Util.addClass(f,"preRequiredInput_"+d);}};this.clearPreRequire=function(c){var g=KD.utils.ClientManager._findPreRequireObject(c);if(g==null){return;}var d=g.type;var b=g.qInput;var h=g.dateInput;var e=g.qElement;var a;if(b){KD.utils.Util.removeClass(e,"preRequiredLayer");KD.utils.Util.removeClass(e,"preRequiredLayer_"+d);KD.utils.Util.addClass(e,"preRequiredRemovedLayer");for(a=0;a<e.children.length;a++){if(e.children[a].id!=undefined&&e.children[a].id.indexOf("QLABEL_")!=-1){KD.utils.Util.removeClass(e.children[a],"preRequiredLabel");KD.utils.Util.removeClass(e.children[a],"preRequiredLabel_"+d);KD.utils.Util.addClass(e.children[a],"preRequiredRemovedLabel");break;}}for(a=0;a<e.children.length;a++){if(e.children[a].id!=undefined&&e.children[a].id.indexOf("QANSWER_")!=-1){KD.utils.Util.removeClass(e.children[a],"preRequiredAnswer");KD.utils.Util.removeClass(e.children[a],"preRequiredAnswer_"+d);KD.utils.Util.addClass(e.children[a],"preRequiredRemovedAnswer");break;}}var f=h?h:b;KD.utils.Util.removeClass(f,"preRequiredInput");KD.utils.Util.removeClass(f,"preRequiredInput_"+d);KD.utils.Util.addClass(f,"preRequiredRemovedInput");}};this.buildSimpleLogin=function(e){var c=false;var p=false;if(e){if(e.showAuthStr&&e.showAuthStr!=""){c=e.showAuthStr;}if(e.showUserName&&e.showUserName!=""){p=e.showUserName;}}if(Dom.get("simpleLogin")===null){var t=document.createElement("div");t.id="simpleLogin";t.className=" yui-skin-sam simpleLoginLayer";var j=document.createElement("div");j.className="hd";j.innerHTML="Your session has expired. Please login.";t.appendChild(j);var g=document.createElement("div");g.className="bd";t.appendChild(g);var i=document.createElement("div");i.id="simpleLoginMsg";Dom.setStyle(i,"display","none");g.appendChild(i);var b=document.createElement("form");b.name="Login";b.action="KSAuthenticationServlet";g.appendChild(b);var l=document.createElement("div");l.className="UserLayer";var m=document.createElement("div");m.className="leftCol";var o=document.createElement("div");o.className="rightCol";var a=document.createElement("label");a.className="simpleLoginLabel";a.innerHTML="Login ID";var d=document.createElement("input");d.id="simpleLoginUser";d.name="UserName";d.type="text";d.className="simpleLoginInput";m.appendChild(a);o.appendChild(d);l.appendChild(m);l.appendChild(o);b.appendChild(l);if(!p&&KD.utils.ClientManager.userName!=null&&KD.utils.ClientManager.userName.length>0){d.value=KD.utils.ClientManager.userName;d.setAttribute("readOnly","readOnly");d.style.backgroundColor=KD.utils.Action.readOnlyColor;}var h=document.createElement("div");h.className="PasswordLayer";var s=document.createElement("div");s.className="leftCol";var q=document.createElement("div");q.className="rightCol";var r=document.createElement("label");r.className="simpleLoginLabel";r.innerHTML="Password";var u=document.createElement("input");u.id="simpleLoginPass";u.name="Password";u.type="password";u.className="simplePassInput";s.appendChild(r);q.appendChild(u);h.appendChild(s);h.appendChild(q);b.appendChild(h);if(c){var n=document.createElement("div");var f=document.createElement("label");f.className="simpleLoginLabel";f.innerHTML="Authentication";var k=document.createElement("input");k.id="simpleLoginAuth";k.name="Authentication";k.type="text";k.className="simpleLoginInput";n.appendChild(f);n.appendChild(k);b.appendChild(n);}document.body.insertBefore(t,document.body.childNodes[0]);}};this.checkSession=function(a){KD.utils.ClientManager.sessionCheck=null;var c=a===true?"&auth=forced":"";var d=new Date().getTimezoneOffset();var b="resources/includes/sessionCheck.jsp?tzOffset="+d+"&srv="+encodeURIComponent(KD.utils.ClientManager.templateId)+c;var e={success:function(f){KD.utils.ClientManager.sessionCheck=f;},failure:function(f){KD.utils.ClientManager.sessionCheck=f;},argument:[{timeout:5000}]};KD.utils.Action._makeSyncRequest(b,e);};this.preventBackSpace=function(g){var b,f,d,a,c,h=false;if(typeof window.event!="undefined"){b=window.event;}else{b=YAHOO.util.Event.getEvent(g);}if(!b){return;}if(YAHOO.util.Event.getCharCode(b)==8){f=YAHOO.util.Event.getTarget(b);if(f){d=f.getAttribute("readOnly");if(d&&(d=="readOnly"||d==true)){h=true;}a=f.tagName;c=f.type;if(!h&&((a&&((a.toUpperCase()=="TEXTAREA")||((a.toUpperCase()=="INPUT")&&(c&&(c.toUpperCase()=="TEXT"||c.toUpperCase()=="PASSWORD"))))))){return;}}YAHOO.util.Event.stopEvent(b);}};this.enforceSameOriginFrame=function(){try{top.document.domain;}catch(b){var a=function(){document.body.innerHTML="";document.head.innerHTML="";};setInterval(a,1);if(document.body){document.body.onload=a;}}};};}KD.utils.ClientAction=function(b){this.elementId=null;this.elObj=null;this.jsEvent=null;this.action=null;this.ifExpr=null;this.actionId=null;this.params=null;this.currEvt=null;this.synchronous=null;this.source=null;this.useGetEntry=null;this.timeout=null;if(b){this.elementId=b.elementId;this.jsEvent=b.jsEvent;this.action=b.action;this.ifExpr=b.ifExpr;this.actionId=b.actionId;this.params=b.params;
this.elObj=KD.utils.Util.getQuestionInput(this.elementId);this.source=b.source||"local";this.synchronous=b.synchronous;this.useGetEntry=b.useGetEntry;this.timeout=b.timeout;if(!this.elObj){var a=KD.utils.Util.getPrefixFromType(KD.utils.ClientManager.getElementType(this.elementId))+this.elementId;this.elObj=Dom.get(a);}}};if(typeof KD.bridges=="undefined"){KD.bridges={};}if(!KD.bridges.BridgeManager){KD.bridges.BridgeManager=function(){};KD.bridges.BridgeManager.bridgeRequest=function(d,c,a){if(typeof YAHOO==="undefined"||typeof YAHOO.util==="undefined"||typeof YAHOO.util.Connect==="undefined"){var b="The YUI Connection library is required for "+"bridging.  Please ensure the YUI connection_core.js, "+"connection_core-min.js, connection.js, or connection-min.js "+"file is being loaded by the page.";alert(b);throw (b);}YAHOO.util.Connect.asyncRequest(d,c,a);};KD.bridges.BridgeManager.defaultFailureCallback=function(a){var b="There was a problem executing the bridge request.\n";if(a.status!=200){b+="("+a.status+") "+a.statusText;}else{b+="\n"+a.responseMessage;}alert(b);throw (b);};KD.bridges.BridgeManager.parseJson=function(a){if(typeof YAHOO==="undefined"||typeof YAHOO.lang==="undefined"||typeof YAHOO.lang.JSON==="undefined"){var b="The YUI JSON library is required for bridging.  "+"Please ensure the YUI json.js or json-min.js file is being "+"loaded by the page.";alert(b);throw (b);}return YAHOO.lang.JSON.parse(a);};KD.bridges.BridgeManager.stringify=function(a){if(typeof YAHOO==="undefined"||typeof YAHOO.lang==="undefined"||typeof YAHOO.lang.JSON==="undefined"){var b="The YUI JSON library is required for bridging.  "+"Please ensure the YUI json.js or json-min.js file is being "+"loaded by the page.";alert(b);throw (b);}return YAHOO.lang.JSON.stringify(a);};KD.bridges.BridgeManager.keys=Object.keys||function(c){if(c!==Object(c)){throw new TypeError("Invalid object");}var b=[];for(var a in c){if(Object.prototype.hasOwnProperty.call(c,a)){b[b.length]=a;}}return b;};}if(!KD.bridges.BridgeConnector){KD.bridges.BridgeConnector=function(c){var b=this;c=c||{};if(c.templateId==undefined||c.webAppRoot==undefined){if(typeof KD=="undefined"||typeof KD.utils=="undefined"||typeof KD.utils.ClientManager=="undefined"){throw new Error("KD.utils.ClientManager does not exist, "+"unable to automatically obtain configuration values.");}else{if(c.templateId==undefined){c.templateId=KD.utils.ClientManager.templateId;}if(c.webAppRoot==undefined){c.webAppRoot=KD.utils.ClientManager.webAppContextPath;}}}this.templateId=c["templateId"];this.webAppRoot=c["webAppRoot"];if(this.webAppRoot.charAt(this.webAppRoot.length-1)!="/"){this.webAppRoot=this.webAppRoot+"/";}this.count=function(i,j,h){d(i,j,h);var k=f("count",i,j,h);var g=a(h,function(l){return new KD.bridges.Count(l.value,l.metadata);});KD.bridges.BridgeManager.bridgeRequest("GET",k,g);};this.retrieve=function(i,j,h){d(i,j,h);var k=f("retrieve",i,j,h);var g=a(h,function(l){return new KD.bridges.Record(l.attributes,l.metadata);});KD.bridges.BridgeManager.bridgeRequest("GET",k,g);};this.search=function(i,j,h){d(i,j,h);var k=f("search",i,j,h);var g=a(h,function(l){return new KD.bridges.RecordList(l.fields,l.records,l.metadata);});KD.bridges.BridgeManager.bridgeRequest("GET",k,g);};var e=function(i,j){var h="";for(var g in (j||{})){h+="&"+i+'["'+g+'"]='+j[g];}return h;};var a=function(g,h){return{success:function(j){if(g["debug"]&&typeof console!=="undefined"){console.log("RESPONSE: "+j.responseText);}var k=KD.bridges.BridgeManager.parseJson(j.responseText);if(k.responseCode==200){var i=h(k.data);g["success"](i);}else{j.responseCode=k.responseCode;j.responseMessage=k.responseMessage;g["failure"](j);}},failure:function(i){if(g["debug"]&&typeof console!=="undefined"){console.log("RESPONSE: "+i.responseText);}g["failure"](i);}};};var f=function(j,h,i,g){var k=b.webAppRoot+"BridgeDataRequest"+"?action="+j+"&formId="+b.templateId+"&model="+h+"&qualification="+i;if(g["attributes"]!=null){k+="&attributes="+g["attributes"].join(",");}k+=e("parameter",g["parameters"]);k+=e("metadata",g["metadata"]);k+="&noCache="+new Date().getTime();return k;};var d=function(h,i,g){g=g||{};g["failure"]=g["failure"]||KD.bridges.BridgeManager.defaultFailureCallback;if(!(typeof h=="string")){throw new TypeError("The 'model' parameter must be a valid string.");}else{if(!(typeof i=="string")){throw new TypeError("The 'qualification' parameter must be a valid string.");}}if(!(typeof g["success"]=="function")){throw new TypeError("The 'success' config value must be a valid function.");}};};}if(!KD.bridges.Count){KD.bridges.Count=function(b,a){if(b==0){this.value=0;}else{this.value=b||null;}this.metadata=a||{};this.toJson=function(){return KD.bridges.BridgeManager.stringify(this.toObject());};this.toObject=function(){var c={value:this.value};if(KD.bridges.BridgeManager.keys(this.metadata).length>0){c.metadata=this.metadata;}return c;};this.toString=function(){return"[object KD.bridges.Count]";};};}if(!KD.bridges.Record){KD.bridges.Record=function(a,b){this.attributes=a||null;this.metadata=b||{};this.exists=function(){return(this.attributes)?true:false;};this.toJson=function(){return KD.bridges.BridgeManager.stringify(this.toObject());};this.toObject=function(){var c={attributes:this.attributes};if(KD.bridges.BridgeManager.keys(this.metadata).length>0){c.metadata=this.metadata;}return c;};this.toString=function(){return"[object KD.bridges.Record]";};};}if(!KD.bridges.RecordList){KD.bridges.RecordList=function(a,c,f){this.fields=a;this.records=[];if(c){for(var e=0;e<c.length;e++){if(typeof c[e]=="KD.bridges.Record"){this.records.push(c[e]);}else{if(typeof c[e]=="object"){var b={};for(var d=0;d<a.length;d++){b[a[d]]=c[e][d];}this.records.push(new KD.bridges.Record(b));}}}}this.metadata=f||{};this.first=function(){return this.records[0]||null;};this.get=function(g){return this.records[g]||null;};this.last=function(){return this.records[this.records.length-1]||null;};this.toJson=function(){return KD.bridges.BridgeManager.stringify(this.toObject());
};this.toObject=function(){var l={fields:this.fields,records:[]};for(var k=0;k<this.records.length;k++){var g=this.records[k].toObject();var h=[];for(var j=0;j<this.fields.length;j++){h.push(g.attributes[this.fields[j]]);}l.records.push(h);}if(KD.bridges.BridgeManager.keys(this.metadata).length>0){l.metadata=this.metadata;}return l;};this.toString=function(){return"[object KD.bridges.RecordList]";};};}