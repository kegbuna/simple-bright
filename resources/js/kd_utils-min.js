if(typeof Dom=="undefined"){Dom=YAHOO.util.Dom;}if(typeof KD=="undefined"){KD={};}if(typeof KD.utils=="undefined"){KD.utils={};}Date.prototype.setISO8601=function(d){var g=0,b,f,e=new Array(),c="^([0-9]{4})-?(0[1-9]|1[0-2])-?([12][0-9]|0[1-9]|3[01])(T?([01][0-9]|2[0-3]):?([0-5][0-9]):?([0-5][0-9])?.?([0-9]{3})?([zZ]|([+-])([01][0-9]|2[0-3]):?([0-5][0-9])?)?)?$",a=d.match(new RegExp(c));if(KD.utils.Util.isBlank(a[1])){return;}if(KD.utils.Util.isBlank(a[2])){return;}if(KD.utils.Util.isBlank(a[3])){return;}e[0]=parseInt(a[1],10);e[1]=parseInt(a[2],10)-1;e[2]=parseInt(a[3],10);e[3]=!KD.utils.Util.isBlank(a[5])?parseInt(a[5],10):0;e[4]=!KD.utils.Util.isBlank(a[6])?parseInt(a[6],10):0;e[5]=!KD.utils.Util.isBlank(a[7])?parseInt(a[7],10):0;e[6]=!KD.utils.Util.isBlank(a[8])?Number("0."+a[8])*1000:0;b=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);if(!KD.utils.Util.isBlank(a[9])){g=(Number(a[11])*60)+Number(a[12]);g*=((a[10]=="-")?1:-1);}if(!KD.utils.Util.isBlank(a[5])){g-=b.getTimezoneOffset();}f=(Number(b)+(g*60*1000));this.setTime(Number(f));};String.prototype.startsWith=function(a){return(this.match("^"+a)==a);};if(!KD.utils.Util){KD.utils.Util=new function(){this.labelIDCache={};this.debugProperties=function(obj){if(obj){var props="Object Properties Available:\n";props+="Name: "+obj.name+"\n";props+="ID: "+obj.id+"\n";props+="Type: "+obj.type+"\n";for(var prop in obj){props+=prop+"="+eval("obj."+prop)+"\n";}alert(props);}else{alert("The object sent was null");}};this.getIDPart=function(id){if(!id){return null;}if(id.indexOf("QLAYER")!=-1){return id.substring("QLAYER_".length);}if(id.indexOf("QLABEL")!=-1){return id.substring("QLABEL_".length);}if(id.indexOf("QANSWER")!=-1){return id.substring("QANSWER_".length);}if(id.indexOf("QLAYER")!=-1){return id.substring("QLAYER_".length);}if(id.indexOf("DYNAMIC_TEXT")!=-1){return id.substring("DYNAMIC_TEXT_".length);}if(id.indexOf("IMAGE")!=-1){return id.substring("IMAGE_".length);}if(id.indexOf("BUTTON")!=-1){return id.substring("BUTTON_".length);}if(id.indexOf("SRVQSTN")!=-1){return id.substring("SRVQSTN_".length);}if(id.indexOf("SECTION")!=-1){return id.substring("SECTION_".length);}if(id.indexOf("PAGE")!=-1){return id.substring("PAGE_".length);}if(id.indexOf("month_")!=-1){return id.substring("month_".length);}if(id.indexOf("day_")!=-1){return id.substring("day_".length);}if(id.indexOf("year_")!=-1){return id.substring("year_".length);}if(id.indexOf("hour_")!=-1){return id.substring("hour_".length);}if(id.indexOf("min_")!=-1){return id.substring("min_".length);}if(id.indexOf("ampm_")!=-1){return id.substring("ampm_".length);}return id;};this.getElementFromObject=function(obj){return YAHOO.util.Event.getTarget(obj);};this.padZeros=function(obj,totalDigits){if(obj==null||typeof obj=="undefined"){return obj;}obj=obj.toString();var pd="";if(totalDigits>obj.length){for(var i=0;i<(totalDigits-obj.length);i++){pd+="0";}}return pd+obj.toString();};this.locateIDByLabel=function(parent,label,fullID){if(parent&&label){var children=parent.childNodes;for(var idx=0;idx<children.length;idx++){if(children[idx].attributes&&children[idx].getAttribute("label")==label){if(fullID){return children[idx].getAttribute("id");}else{return KD.utils.Util.getIDPart(children[idx].getAttribute("id"));}}if(children[idx].childNodes&&children[idx].childNodes.length>0){var id=KD.utils.Util.locateIDByLabel(children[idx],label,fullID);if(id!=""){return id;}}}}return"";};this.registerInCache=function(element,update){var label,id,idPart,i,qEls,el_label,type="",forceUpdate=typeof update==="undefined"?false:update;if(!element){return;}try{if(element.id){id=element.id;type=KD.utils.Util.getPrefixFromId(element.id)||"";}label=element.getAttribute("label");if(label&&label.length>0){if(forceUpdate||!KD.utils.Util.loadFromCache(label)){KD.utils.Util.setInCache(label,element);}if(forceUpdate||!KD.utils.Util.loadFromCache(type+label)){KD.utils.Util.setInCache(type+label,element);}}if(id&&id.length>0){idPart=KD.utils.Util.getIDPart(id);if(forceUpdate||!KD.utils.Util.loadFromCache(id)){KD.utils.Util.setInCache(id,element);}if(forceUpdate||!KD.utils.Util.loadFromCache(idPart)){KD.utils.Util.setInCache(idPart,element);}if(element.id.indexOf("QLAYER_")!=-1||element.id.indexOf("QANSWER_")!=-1){qEls=YAHOO.util.Dom.getElementsBy(function(obj){return(obj.id&&obj.id.length>0)?true:false;},"*",element);for(i=0;i<qEls.length;i++){el_label=qEls[i].getAttribute("label");if(!el_label){qEls[i].setAttribute("label",label);}KD.utils.Util.registerInCache(qEls[i]);}}}}catch(e){}};this.updateInCache=function(element){KD.utils.Util.registerInCache(element,true);};this.labelCache=function(key,element){this.key=key;this.element=element;};this.setInCache=function(key,element){KD.utils.Util.labelIDCache[key]=element;};this.isCacheIDEmpty=function(){return isEmpty(KD.utils.Util.labelIDCache);};this.loadFromCache=function(label){return KD.utils.Util.labelIDCache[label];};this.getPrefixFromId=function(id){var i,prefix="";if(id){i=id.indexOf("_");if(i>-1){prefix=id.slice(0,i+1);if(prefix=="DYNAMIC_"){prefix="DYNAMIC_TEXT_";}}}return prefix;};this.getPrefixFromType=function(type){if(!type){return"no type given";}if(type.indexOf("Question")!=-1){return"QLAYER_";}if(type.indexOf("Section")!=-1){return"SECTION_";}if(type.indexOf("Page")!=-1){return"PAGE_";}if(type.indexOf("Dynamic Text")!=-1){return"DYNAMIC_TEXT_";}if(type.indexOf("Button")!=-1){return"BUTTON_";}if(type.indexOf("Image")!=-1){return"IMAGE_";}return"unknown prefix";};this.getLabelFromAnswerEl=function(answerEl){var thisEl=answerEl;var theLabel="";while(thisEl){theLabel=thisEl.parentNode.getAttribute("label");if(theLabel&&theLabel!=""){return theLabel;}else{thisEl=thisEl.parentNode;}}return null;};this.getLabelValueFromAnswerEl=function(answerEl){var thisEl=answerEl,questionId;questionId=this.getIDPart(thisEl.id);return this.getQuestionLabelValue(questionId);};this.getQuestionId=function(label_id){var id,q=this.getElementObject(label_id);if(q){id=this.getIDPart(q.id);}return id;
};this.getElementObject=function(label_id,type){if(!type){type=KD.utils.Util.getPrefixFromType(KD.utils.ClientManager.getElementType(label_id));if(type=="no type given"){type="";}}var obj=KD.utils.Util.loadFromCache(type+label_id);return obj;};this.getAnswerLayer=function(label_id){var obj=KD.utils.Util.getElementObject(label_id,"QANSWER_");if(obj&&obj!=""){}else{alert("function ks_getAnswerLayer - Unable to locate the Object for: "+label_id);}return obj;};this.getQuestionLabel=function(label_id){var obj=KD.utils.Util.getElementObject(label_id,"QLABEL_");if(obj&&obj!=""){}else{alert("function getQuestionLabel - Unable to locate the Object for: "+label_id);}return obj;};this.getQuestionLabelValue=function(label){var obj,value="";if(label&&label.nodeType&&label.nodeType==1){obj=label;}else{obj=KD.utils.Util.getElementObject(label,"QLABEL_");}if(obj&&obj!=""){value=KD.utils.Util.trimString(obj.innerHTML);}return value;};this.getQuestionLayer=function(label_id){var obj=KD.utils.Util.getElementObject(label_id,"QLAYER_");if(obj&&obj!=""){}else{alert("function ks_getQuestionLayer - Unable to locate the Object for: "+label_id);}return obj;};this.getQuestionInput=function(label_id){var i,j,nodes,nodeTypes=["input","select","textarea"],ret=new Array(),obj=KD.utils.Util.getElementObject(label_id,"QANSWER_");if(obj){for(i=0;i<nodeTypes.length;i+=1){nodes=obj.getElementsByTagName(nodeTypes[i]);for(j=0;j<nodes.length;j+=1){if(nodes[j].id.startsWith("SRVQSTN_")){ret.push(nodes[j]);}}}}else{obj=Dom.get("SRVQSTN_"+label_id);if(obj){return obj;}else{return null;}}if(ret.length==1){return ret[0];}if(ret&&ret!=""){}else{alert("function getQuestionInput - Unable to locate any input elements for :"+label_id);}return ret;};this.getQuestionValue=function(label_id){var els=KD.utils.Util.getQuestionInput(label_id);if(els){if(!KD.utils.Util.isArray(els)){els=[els];}var thisVal="";var qstnType="";for(var i=0;i<els.length;i++){var cls=els[i].className;var thisID=els[i].getAttribute("id");if(cls&&(cls=="dateHidden"||cls=="dtHidden")){qstnType="Date";thisVal=els[i].value;break;}if(els[i].type&&(els[i].type&&els[i].type.toUpperCase()=="CHECKBOX")&&els[i].checked==true){qstnType="Checkbox";thisVal+=els[i].value+", ";thisVal=KD.utils.Util._unescapeSpecialChars(thisVal);continue;}else{if(els[i].type&&els[i].type.toUpperCase()=="RADIO"&&els[i].checked==true){thisVal=els[i].value;thisVal=KD.utils.Util._unescapeSpecialChars(thisVal);break;}else{if(els[i].tagName.toUpperCase()=="SELECT"){thisVal=els[i].value;thisVal=KD.utils.Util._unescapeSpecialChars(thisVal);break;}else{if((els[i].tagName.toUpperCase()=="INPUT"&&els[i].type.toUpperCase()=="TEXT")||els[i].tagName.toUpperCase()=="TEXTAREA"){thisVal=els[i].value;break;}}}}}if(qstnType=="Checkbox"&&thisVal.indexOf(",")!=-1){thisVal=KD.utils.Util.trimString(thisVal);thisVal=thisVal.substring(0,thisVal.length-1);}return thisVal;}else{alert("function KD.utils.Util.getQuestionValue - Unable to locate the Object for: "+label_id);return"";}};this.setQuestionValue=function(label_id,value){var nullThis=false;if(value==null||typeof value=="undefined"||value=="undefined"||value=="$NULL$"||value=="$NULL$"){nullThis=true;}var els=KD.utils.Util.getQuestionInput(label_id);if(els){if(KD.utils.Util._isDateQuestion(els)||KD.utils.Util._isDateTimeQuestion(els)){if(nullThis||value==""){KD.utils.Action.setDateFields(label_id,null,true);}else{var dateArr=[];if(typeof value=="string"){if(value.indexOf("-")!=-1){var utcDate=new Date();utcDate.setISO8601(value);dateArr[0]=utcDate.getFullYear();dateArr[1]=utcDate.getMonth()+1;dateArr[2]=utcDate.getDate();if(value.indexOf("T")!=-1){dateArr[3]=utcDate.getHours();dateArr[4]=utcDate.getMinutes();dateArr[5]=utcDate.getSeconds();}}else{if(value.indexOf("/")!=-1){var dtParts=value.split(" ");var remedyDateArr=dtParts[0].split("/");dateArr[0]=remedyDateArr[2];dateArr[1]=remedyDateArr[0];dateArr[2]=remedyDateArr[1];if(dtParts.length==2){var tParts=dtParts[1].split(":");dateArr=dateArr.concat(tParts);}}else{KD.utils.Action.setDateFields(label_id,null,true);return null;}}}else{if(KD.utils.Util.isArray(value)){dateArr=value;}}KD.utils.Action.setDateFields(label_id,dateArr);}return null;}if(KD.utils.Util.isArray(els)){for(var i=0;i<els.length;i++){if(nullThis){els[i].checked=false;continue;}value=KD.utils.Util._escapeSpecialChars(value);if(els[i].value==value){els[i].checked=true;return null;}}}else{if(els.type&&els.type.toUpperCase()=="CHECKBOX"||els.type.toUpperCase()=="RADIO"){if(nullThis){els.checked=false;return null;}value=KD.utils.Util._escapeSpecialChars(value);if(els.value==value){els.checked=true;}return null;}else{if(els.nodeName.toUpperCase()=="SELECT"&&els.options.length>0){if(nullThis){els.selectedIndex=0;els.options[0].setAttribute("selected","true");return null;}value=KD.utils.Util._escapeSpecialChars(value);for(i=0;i<els.options.length;i++){if(els.options[i].value==value){els.options[i].setAttribute("selected","true");els.selectedIndex=i;return null;}}}else{if(nullThis){value="";}else{if(els.nodeName.toUpperCase()=="TEXTAREA"){value=value.replace(/%0A/gi,"\n");value=value.replace(/%0D/gi,"\n");}}els.value=value;if(els.getAttribute("fileTypesAllowed")!=null){KD.utils.Action._setFileLink(els);}}}}}else{alert("function KD.utils.Util.setQuestionValue - Unable to locate the Object for: "+label_id);return false;}return true;};this.getTextObject=function(label_id){var obj=KD.utils.Util.getElementObject(label_id,"DYNAMIC_TEXT_");if(obj&&obj!=""){}else{alert("function ks_getTextObject - Unable to locate the Object for: "+label_id);}return obj;};this.getImageObject=function(label_id){var obj=KD.utils.Util.getElementObject(label_id,"IMAGE_");if(obj&&obj!=""){}else{alert("function ks_getImageObject - Unable to locate the Object for: "+label_id);}return obj;};this.getButtonObject=function(label_id){var obj=KD.utils.Util.getElementObject(label_id,"BUTTON_");if(obj&&obj!=""){}else{alert("function getButtonObject - Unable to locate the Object for: "+label_id);}return obj;
};this.isArray=function(obj){if(obj==null){return false;}return obj.constructor==Array;};this.trimString=function(sInString){sInString=sInString.replace(/^\s+/g,"");return sInString.replace(/\s+$/g,"");};this.isBlank=function(value){if(value==null||typeof value=="undefined"){return true;}if(KD.utils.Util.isArray(value)){return value.length==0;}if(value.constructor==Object){var hasProperty=false;for(var name in value){if(value.hasOwnProperty(name)&&!KD.utils.Util.isBlank(value[name])){hasProperty=true;break;}}return !hasProperty;}return value.toString().length==0;};this.getKeyPressed=function(evt){var key=YAHOO.util.Event.getCharCode(evt);return key;};this.getElementType=function(elId){if(elId.indexOf("QLAYER_")!=-1||elId.indexOf("SRVQSTN_")!=-1||elId.indexOf("QLABEL_")!=-1||elId.indexOf("QANSWER_")!=-1){return"Question";}if(elId.indexOf("SECTION_")!=-1){return"Section";}if(elId.indexOf("PAGE_")!=-1){return"Page";}if(elId.indexOf("DYNAMIC_TEXT")!=-1){return"Dynamic Text";}if(elId.indexOf("BUTTON_")!=-1){return"Button";}if(elId.indexOf("IMAGE_")!=-1){return"Image";}return"unknown type";};this.getCheckboxParentId=function(answerEl){var thisEl=answerEl;var parentId="";if(thisEl&&thisEl.type.toLowerCase()=="checkbox"){while(thisEl){parentId=thisEl.parentNode.getAttribute("id");if(parentId&&parentId!=""){parentId=parentId.replace("QANSWER_","");parentId=parentId.replace("QLABEL_","");return parentId;}else{thisEl=thisEl.parentNode;}}return null;}return null;};this.setCookie=function(cookieName,cookieValue,time){var today=new Date();var expire=new Date();expire.setTime(today.getTime()+time);document.cookie=cookieName+"="+escape(cookieValue)+";expires="+expire.toGMTString();};this.getCookieVal=function(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1){endstr=document.cookie.length;}return unescape(document.cookie.substring(offset,endstr));};this.getCookie=function(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){return KD.utils.Util.getCookieVal(j);}i=document.cookie.indexOf(" ",i)+1;if(i==0){break;}}return null;};this.deleteCookie=function(name,path,domain){if(KD.utils.Util.getCookie(name)){document.cookie=name+"="+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT";}};this.unloadCookie=function(){var pageID=Dom.get("pageID").value;KD.utils.Util.deleteCookie("KDCACHE-CHECK"+pageID);KD.utils.Util.setCookie("KD_PAGE",pageID,5000);};this.resetCachePageValues=function(){KD.utils.Util.unloadCookie();};this.checkCachePageLoad=function(){window.history.forward(1);var fromPage=KD.utils.Util.getCookie("KD_PAGE");if(fromPage&&fromPage!=""){KD.utils.Util.deleteCookie("KD_PAGE");return;}else{KD.utils.Util.checkCacheLoadStatus();}};this.checkCacheLoadStatus=function(){var pageID=Dom.get("pageID").value;if(!KD.utils.Util.getCookie("KDCACHE-CHECK"+pageID)){window.location.reload();}};this.cloneObj=function(obj,deep){if(obj==null||typeof(obj)!="object"){return obj;}var newObj=new Object();for(var prop in obj){try{if(deep){newObj[prop]=KD.utils.Util.cloneObj(obj[prop]);}else{newObj[prop]=obj[prop];}}catch(e){}}return newObj;};this.isDate=function(el){if(el){var id=KD.utils.Util.getIDPart(el.id);if(Dom.get("year_"+id)){return true;}}return false;};this._escapeSpecialChars=function(val){if(!val){return val;}var specialChars={"'":"%27"};var re;for(var key in specialChars){re=new RegExp(key,"g");val=val.toString().replace(re,specialChars[key]);}return val;};this._unescapeSpecialChars=function(val){if(!val){return val;}var specialChars={"%27":"'"};var re;for(var key in specialChars){re=new RegExp(key,"g");val=val.toString().replace(re,specialChars[key]);}return val;};this.getParameters=function(){var parms={},sUrl,pairs,pair,i;sUrl=window.location.search;if(sUrl){sUrl=sUrl.substr(1);pairs=sUrl.split("&");for(i=0;i<pairs.length;i+=1){pair=pairs[i].split("=");parms[pair[0]]=pair[1];}}return parms;};this.getParameter=function(key){var retVal=null;var parms=this.getParameters();if(parms[key]){retVal=parms[key];}return retVal;};this.isCheckboxItemChecked=function(label_id,cb_item){var cb=KD.utils.Util.getQuestionInput(label_id);if(cb){for(var i=0;i<cb.length;i++){if(cb[i].value===cb_item&&cb[i].checked){return true;}}}return false;};this.getElementsByClassName=function(className,tag,root,apply){return Dom.getElementsByClassName(className,tag,root,apply);};this.hasClass=function(el,className){return Dom.hasClass(el,className);};this.addClass=function(el,className){return Dom.addClass(el,className);};this.removeClass=function(el,className){return Dom.removeClass(el,className);};this.getAnswerType=function(answerField){answerField=Dom.get(answerField);if(answerField==null){return null;}return KD.utils.Util.isDate(answerField)?"date":answerField.nodeName.toString().toLowerCase()=="select"?"select":answerField.type;};this.formatTime=function(value){if(value==null||value==""||value.indexOf("M")!=-1){return value;}var ampm="AM";var parts=value.split(":");var h=parseInt(parts[0],10);if(h>=12){h-=12;ampm="PM";if(h==0){h=12;}}parts[0]=h;return(parts.join(":")+" "+ampm);};this.formatDate=function(values){var y,m,d,dt,dsep="-";if(values&&values.length&&values.length>=3){y=parseInt(values[0],10);if(!(y.toString().length==4)){return"";}m=parseInt(values[1],10);if(m>0&&m<=12){m=KD.utils.Util.padZeros(m,2);}else{return"";}d=parseInt(values[2],10);if(d>0&&d<=31){d=KD.utils.Util.padZeros(d,2);}else{return"";}dt=y+dsep+m+dsep+d;}else{dt="";}return dt;};this.parseDtString=function(dtStr){var localDate,dateParts,i,parts=[];if(dtStr==""){return parts;}if(dtStr.indexOf("T")!=-1){localDate=new Date();localDate.setISO8601(dtStr);parts[parts.length]=localDate.getUTCFullYear();parts[parts.length]=localDate.getUTCMonth()+1;parts[parts.length]=localDate.getUTCDate();parts[parts.length]=localDate.getUTCHours();parts[parts.length]=localDate.getUTCMinutes();parts[parts.length]=localDate.getUTCSeconds();
}else{dateParts=dtStr.split("-");if(dateParts.length>0){for(i=0;i<dateParts.length;i++){parts[parts.length]=parseInt(dateParts[i],10);}}}return parts;};this.getDtParts=function(dt){var parts=[];if(!(dt instanceof Date)){return[];}parts[0]=dt.getFullYear();parts[1]=dt.getMonth()+1;parts[2]=dt.getDate();parts[3]=dt.getHours();parts[4]=dt.getMinutes();parts[5]=dt.getSeconds();return parts;};this.getUTCDtParts=function(dt){var parts=[];if(!(dt instanceof Date)){return[];}parts[0]=dt.getUTCFullYear();parts[1]=dt.getUTCMonth()+1;parts[2]=dt.getUTCDate();parts[3]=dt.getUTCHours();parts[4]=dt.getUTCMinutes();parts[5]=dt.getUTCSeconds();return parts;};this.localFromUTC=function(utc){var offset,local,utcParts,dt=utc;if(typeof dt=="string"){utcParts=this.parseDtString(dt);dt=new Date(utcParts[0],utcParts[1]-1,utcParts[2],utcParts[3],utcParts[4],utcParts[5]);}if(dt instanceof Date){offset=dt.getTimezoneOffset()*60*1000;local=new Date(dt.getTime()-offset);return local;}else{return utc;}};this.utcFromLocal=function(dt){if(dt instanceof Date){var offset=dt.getTimezoneOffset()*60*1000;var utc=new Date(dt.getTime()+offset);return utc;}else{return dt;}};this.formatLocalDate=function(value){var dt,h,m,s,local;if(value instanceof Date){local=value;}else{if(value&&value.length&&value.length>=3){dt=KD.utils.Util.formatDate(value);if(dt==""){return dt;}local=new Date(parseInt(value[0],10),parseInt(value[1],10)-1,parseInt(value[2],10),0,0,0);}else{local="";}}if(local==null||local==""){return"";}dt=local.toLocaleDateString();return dt;};this.formatLocalDateTime=function(value,friendly){var dt,h,m,s,local,tsep=":",friendlyFormat=friendly===false?false:true;if(value instanceof Date){local=value;}else{if(value&&value.length&&value.length>=3){dt=KD.utils.Util.formatDate(value);if(dt==""){return dt;}h=parseInt(value[3],10);if(h<0||h>=24){h=0;}if(isNaN(h)){return"";}m=parseInt(value[4],10);if(m<0||m>=60){m=0;}if(isNaN(m)){return"";}s=parseInt(value[5],10);if(s<0||s>=60){s=0;}if(isNaN(s)){return"";}local=new Date(parseInt(value[0],10),parseInt(value[1],10)-1,parseInt(value[2],10),h,m,s);}else{local="";}}if(local==null||local==""){return"";}if(friendlyFormat){dt=local.toLocaleDateString()+" "+local.toLocaleTimeString();}else{var localDtParts=KD.utils.Util.getDtParts(local);dt=KD.utils.Util.formatDate(localDtParts)+"T"+KD.utils.Util.padZeros(localDtParts[3],2)+tsep+KD.utils.Util.padZeros(localDtParts[4],2)+tsep+KD.utils.Util.padZeros(localDtParts[5],2);var offset=local.getTimezoneOffset();var offsetSign=offset>0?"-":"+";var offsetH=parseInt(Math.abs(offset)/60,10);var offsetM=parseInt(Math.abs(offset)%60,10);dt+=offsetSign+KD.utils.Util.padZeros(offsetH,2)+tsep+KD.utils.Util.padZeros(offsetM,2);}return dt;};this.formatUTCDateTime=function(values){var dt,h,m,s,tsep=":";if(values&&values.length&&values.length>=3){dt=KD.utils.Util.formatDate(values);if(dt==""){return dt;}h=parseInt(values[3],10);if(h<0||h>=24){h=0;}if(isNaN(h)){return"";}m=parseInt(values[4],10);if(m<0||m>=60){m=0;}if(isNaN(m)){return"";}s=parseInt(values[5],10);if(s<0||s>=60){s=0;}if(isNaN(s)){return"";}var local=new Date(parseInt(values[0],10),parseInt(values[1],10)-1,parseInt(values[2],10),h,m,s);var utcDtParts=KD.utils.Util.getUTCDtParts(local);dt=KD.utils.Util.formatDate(utcDtParts)+"T"+KD.utils.Util.padZeros(utcDtParts[3],2)+tsep+KD.utils.Util.padZeros(utcDtParts[4],2)+tsep+KD.utils.Util.padZeros(utcDtParts[5],2)+"Z";}else{dt="";}return dt;};this.formatSimpleDateTime=function(dt,sep){sep=sep||"/";var y=dt.getFullYear(),M=KD.utils.Util.padZeros(dt.getMonth()+1,2),d=KD.utils.Util.padZeros(dt.getDate(),2),h=dt.getHours(),m=KD.utils.Util.padZeros(dt.getMinutes(),2),s=KD.utils.Util.padZeros(dt.getSeconds(),2),a="AM";if(h>=12){a="PM";if(h>12){h+=-12;}}h=KD.utils.Util.padZeros(h,2);return y+sep+M+sep+d+" "+h+":"+m+":"+s+" "+a;};this.getLocale=function(){if(navigator){if(navigator.userLanguage){return navigator.userLanguage;}else{if(navigator.browserLanguage){return navigator.browserLanguage;}else{if(navigator.systemLanguage){return navigator.systemLanguage;}else{if(navigator.language){return navigator.language;}}}}}return null;};this.removeBlankAttribute=function(el,attName){var att;if(el&&attName){att=el.getAttribute(attName);if(att==null||att.length==0){el.removeAttribute(attName);}}};this.removeBlankRequiredAttributes=function(){var a="required",c="answerValue",f=Dom.get("pageQuestionsForm");KD.utils.Util.getElementsByClassName(c,"input",f,function(o){KD.utils.Util.removeBlankAttribute(o,a);});KD.utils.Util.getElementsByClassName(c,"textarea",f,function(o){KD.utils.Util.removeBlankAttribute(o,a);});KD.utils.Util.getElementsByClassName(c,"select",f,function(o){KD.utils.Util.removeBlankAttribute(o,a);});};this._checkClassName=function(els,className){var result=false;if(!KD.utils.Util.isArray(els)){els=new Array(els);}var test=KD.utils.Util.hasClass(els,className);for(var i=0;i<test.length;i++){if(test[i]){result=true;break;}}return result;};this._isDateQuestion=function(els){return KD.utils.Util._checkClassName(els,"dateHidden");};this._isDateTimeQuestion=function(els){return KD.utils.Util._checkClassName(els,"dtHidden");};};}KD.utils.Hash=function(){this.length=0;this.items=new Array();for(var a=0;a<arguments.length;a+=2){if(typeof(arguments[a+1])!="undefined"){this.items[arguments[a]]=arguments[a+1];this.length++;}}this.removeItem=function(c){var b;if(typeof(this.items[c])!="undefined"){this.length--;b=this.items[c];delete this.items[c];}return b;};this.getItem=function(b){return this.items[b];};this.setItem=function(b,c){if(typeof(c)!="undefined"){if(typeof(this.items[b])=="undefined"){this.length++;}this.items[b]=c;}return c;};this.hasItem=function(b){return typeof(this.items[b])!="undefined";};};KD.utils.Client=function(){this.requiredFields=new KD.utils.Hash();this.patternFields=new KD.utils.Hash();this.eventFields=new KD.utils.Hash();};